# 최초의 창

멋진 그래픽을 만들기 전에 가장 먼저 해야 할 일은 OpenGL 컨텍스트와 그림을 그릴 애플리케이션 창을 생성하는 것입니다. 하지만 이러한 작업은 운영 체제마다 다르며, OpenGL은 이러한 작업을 직접 하지 않습니다. 즉, 창을 생성하고, 컨텍스트를 정의하고, 사용자 입력을 처리하는 모든 과정을 우리가 수행해야 합니다.

다행히도 우리가 해야 할 일을 대신 해주는 라이브러리가 많으며, 그중 일부는 특히 OpenGL을 대상으로 합니다. 이러한 라이브러리를 사용하면 운영체제 관련 작업을 모두 생략하고 렌더링할 창과 OpenGL 컨텍스트를 제공받을 수 있습니다. 인기 있는 라이브러리로는 GLUT, SDL, SFML, GLFW 등이 있습니다. LearnOpenGL에서는 `GLFW`를 사용할 예정입니다. 다른 라이브러리를 사용하셔도 무방하며, 대부분의 설정은 GLFW와 유사합니다.

!!! note ""
    많은 경우에서 GLUT는 추천하지 않습니다. GLUT는 오래되었고, 너무 단순하고, 대신 사용할수 있는 라이브러리 많습니다. GLFW를 사용하세요.

## GLFW

GLFW는 OpenGL을 위해 특별히 작성된 C 언어 라이브러리입니다. GLFW는 화면에 콘텐츠를 렌더링하는 데 필요한 기본적인 기능들을 제공합니다. OpenGL 컨텍스트를 생성하고, 창 매개변수를 정의하고, 사용자 입력을 처리할 수 있으며, 이는 우리의 목적에 충분합니다.

이 장과 다음 장의 목표는 GLFW를 실행하여 OpenGL 컨텍스트를 제대로 생성하고 간단한 창을 표시하여 테스트해 볼 수 있도록 하는 것입니다. 이 장에서는 GLFW 라이브러리를 가져오고, 빌드하고, 링크하는 과정을 단계별로 설명합니다. 이 글을 작성하는 시점을 기준으로 Microsoft Visual Studio 2019 IDE를 사용하지만, 최신 버전의 Visual Studio에서도 과정은 동일합니다. Visual Studio를 사용하지 않거나 이전 버전을 사용하는 경우에도 대부분의 다른 IDE에서 유사한 과정을 거치므로 걱정하지 않으셔도 됩니다.

## GLFW 빌드하기

GLFW는 웹페이지의 [다운로드 페이지](https://www.glfw.org/download.html)에서 구할 수 있습니다. GLFW는 Visual Studio 2012부터 2019까지 사용할 수 있는 컴파일된 바이너리와 헤더 파일을 제공하지만, 실습을 위해 소스 코드에서 직접 컴파일해 보겠습니다. 모든 오픈소스 라이브러리에 컴파일된 바이너리가 제공되는 것은 아니므로, 직접 컴파일하는 과정을 경험해 보는 것이 목적입니다. 자, 그럼 *소스 패키지*를 다운로드해 보겠습니다.

!!! warning ""
    모든 라이브러리는 64비트 바이너리로 빌드될 예정이므로, 미리 컴파일된 바이너리를 사용하는 경우 64비트 바이너리를 다운로드하시기 바랍니다.

소스 패키지를 다운로드했으면 압축을 풀고 내용을 열어보세요. 우리는 몇 가지 항목에만 관심이 있습니다.

1. 컴파일 결과로 생성된 라이브러리
2. include 폴더

소스 코드에서 라이브러리를 컴파일하면 결과 라이브러리가 사용자의 CPU/운영체제에 완벽하게 최적화된다는 장점이 있습니다. 미리 컴파일된 바이너리는 이러한 장점을 항상 제공하는 것은 아닙니다(때로는 시스템에 맞는 미리 컴파일된 바이너리를 구할 수 없는 경우도 있습니다). 하지만 공개된 소스코드로 빌드하는 과정에는 문제가 있습니다. 모든 사람이 동일한 IDE나 빌드 시스템을 사용하여 애플리케이션을 개발하는 것은 아니기 때문에, 제공된 프로젝트/솔루션 파일이 다른 사람의 환경과 호환되지 않을 수 있습니다. 따라서 사용자는 제공된 .c/.cpp 및 .h/.hpp 파일을 사용하여 자신만의 프로젝트/솔루션을 구성해야 하는데, 이는 번거로운 작업입니다. 바로 이러한 이유 때문에 CMake라는 도구가 존재합니다.

### CMake

!!! note ""
    원문에서는 윈도우 환경에서 Visual Studio 2019를 사용하는걸 상정합니다. 저(번역가)는 리눅스를 사용하며, VSCode를 사용하므로, 리눅스나 맥 같은 기타 환경에서의 빌드도 따로 설명하겠습니다. 같은 이유로 아래의 Visual Studio에서 빌드하는 설명은 부실할 수 있습니다. 


CMake는 미리 정의된 CMake 스크립트를 사용하여 소스 코드 파일 모음으로부터 사용자가 선택한 프로젝트/솔루션 파일(예: Visual Studio 솔루션 파일/make 파일 등)을 생성할 수 있는 도구입니다. 이를 통해 GLFW 소스 패키지에서 Visual Studio 2019 프로젝트 파일을 생성하고, 이 파일을 사용하여 라이브러리를 컴파일할 수 있습니다. 먼저 CMake를 다운로드하여 설치해야 합니다. CMake는 공식 [다운로드 페이지](http://www.cmake.org/cmake/resources/software.html)에서 다운로드할 수 있습니다.

CMake를 설치한 후에는 CLI나 GUI를 통해 실행할 수 있습니다. 여기서는 복잡한 과정을 피하고 GUI를 사용하겠습니다. CMake는 소스 코드 폴더와 바이너리를 저장할 폴더를 필요로 합니다. 소스 코드 폴더로는 다운로드한 GLFW 소스 패키지의 루트 폴더를 선택하고, 바이너리 저장 폴더로는 'build'라는 새 디렉토리를 생성한 후 해당 디렉토리를 선택합니다.

![](../static/cmake.png)

소스 및 대상 폴더를 설정했으면 구성 버튼을 클릭하여 CMake가 필요한 설정과 소스 코드를 읽도록 합니다. 다음으로 프로젝트에 사용할 제너레이터를 선택해야 하는데, Visual Studio 2019를 사용하고 있으므로 Visual Studio 16 옵션을 선택합니다(Visual Studio 2019는 Visual Studio 16이라고도 합니다). CMake는 결과 라이브러리를 구성할 수 있는 빌드 옵션을 표시합니다. 기본값을 그대로 두고 다시 구성을 클릭하여 설정을 저장합니다. 설정이 완료되면 생성 버튼을 클릭하면 빌드 폴더에 프로젝트 파일이 생성됩니다.

### 컴파일

`build` 폴더에 `GLFW.sln`이라는 파일이 생성되었으며, 이를 Visual Studio 2019로 엽니다. CMake가 이미 적절한 구성 설정이 포함된 프로젝트 파일을 생성했으므로 솔루션 빌드만 하면 됩니다. CMake는 솔루션이 64비트 라이브러리로 컴파일되도록 자동으로 구성했을 것입니다. 이제 솔루션 빌드를 클릭합니다. 그러면 `build/src/Debug` 폴더에 `glfw3.lib`라는 이름의 컴파일된 라이브러리 파일이 생성됩니다.

라이브러리를 생성한 후에는 IDE가 OpenGL 프로그램에 필요한 라이브러리와 포함 파일의 위치를 ​​알 수 있도록 해야 합니다. 이를 위한 일반적인 접근 방식은 두 가지입니다.

1. IDE 또는 컴파일러의 `/lib` 및 `/include` 폴더를 찾아서 GLFW의 `include` 폴더 내용을 IDE의 `/include` 폴더에 추가하고, 마찬가지로 `glfw3.lib` 파일을 IDE의 `/lib` 폴더에 추가합니다. 이 방법은 작동하지만 권장되는 방법은 아닙니다. 라이브러리 및 include 파일의 위치를 ​​추적하기 어렵고, IDE/컴파일러를 새로 설치할 때마다 이 과정을 반복해야 하기 때문입니다.
2. 또 다른 방법(그리고 권장되는 방법)은 IDE 또는 컴파일러에서 참조할 수 있는 타사 라이브러리의 헤더 파일/라이브러리를 모두 담을 새 디렉터리 세트를 원하는 위치에 만드는 것입니다. 예를 들어, OpenGL 프로젝트에 필요한 모든 라이브러리와 헤더 파일을 각각 저장하는 `Libs` 폴더와 `Include` 폴더가 포함된 단일 폴더를 만들 수 있습니다. 이렇게 하면 모든 타사 라이브러리가 단일 위치(여러 컴퓨터에서 공유 가능)에 정리됩니다. 단, 새 프로젝트를 만들 때마다 IDE에 해당 디렉터리의 위치를 ​​알려줘야 한다는 점을 유의해야 합니다.

!!! note ""
    보통 2번과 같은 작업을 인클루드 파치(include path)를 추가한다고 부릅니다. 보통 소스코드(`main.c` 등)는 프로젝트 폴더 안의 `src` 폴더에 저장하고, 헤더나 라이브러리는 프로젝트 폴더 안의 `include` 라는 이름의 폴더에 저장합니다.

필요한 파일들을 원하는 위치에 저장했으면, 이제 첫 번째 OpenGL GLFW 프로젝트 생성을 시작할 수 있습니다.

## 첫 발걸음

> 개발자에게는 작은 한 단계일지라도, OpenGL을 처음 배우는 당신에게는 위대한 도약입니다.

먼저 Visual Studio를 열고 새 프로젝트를 생성합니다. 여러 옵션이 표시되면 C++를 선택하고 빈 프로젝트(Empty Project)를 선택합니다(프로젝트 이름을 약간 재미있게 지어보세요). 모든 작업을 64비트 환경에서 수행할 예정인데 프로젝트가 기본적으로 32비트로 설정되어 있으므로, 상단의 디버그 옆 드롭다운 메뉴에서 x86을 x64로 변경해야 합니다.

![](../static/x64.png)

이 과정이 완료되면 이제 첫 번째 OpenGL 애플리케이션을 만들 수 있는 작업 공간이 마련되었습니다!

## 링킹

프로젝트에서 GLFW를 사용하려면 라이브러리를 프로젝트에 <span style="color: #228B22;">링크(link)</span>해야 합니다. 링커 설정에서 `glfw3.lib`를 사용하도록 지정하면 되지만, 저희 프로젝트는 타사 라이브러리를 다른 디렉토리에 저장하기 때문에 `glfw3.lib`의 위치를 ​​알지 못합니다. 따라서 먼저 해당 디렉토리를 프로젝트에 추가해야 합니다.

